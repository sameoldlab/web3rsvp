"use strict";var f=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var w=(e,t)=>{for(var r in t)f(e,r,{get:t[r],enumerable:!0})},A=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of v(t))!C.call(e,i)&&i!==r&&f(e,i,{get:()=>t[i],enumerable:!(n=N(t,i))||n.enumerable});return e};var $=e=>A(f({},"__esModule",{value:!0}),e);var U={};w(U,{Script:()=>u,returnZeroScript:()=>M});module.exports=$(U);var h=require("@ethersproject/bytes"),s=require("@fuel-ts/abi-coder"),a=require("@fuel-ts/transactions");var O=require("@fuel-ts/constants"),p=require("@fuel-ts/transactions");var D=["Success","Revert","OutOfGas","TransactionValidity","MemoryOverflow","ArithmeticOverflow","ContractNotFound","MemoryOwnership","NotEnoughBalance","ExpectedInternalContext","AssetIdNotFound","InputNotFound","OutputNotFound","WitnessNotFound","TransactionMaturity","InvalidMetadataIdentifier","MalformedCallStructure","ReservedRegisterNotWritable","ErrorFlag","InvalidImmediateValue","ExpectedCoinInput","MaxMemoryAccess","MemoryWriteOverlap","ContractNotInInputs","InternalBalanceOverflow","ContractMaxSize","ExpectedUnallocatedStack","MaxStaticContractsReached","TransferAmountCannotBeZero","ExpectedOutputVariable","ExpectedParentInternalContext","IllegalJump","NonZeroMessageOutputRecipient","ZeroedMessageOutputRecipient"],R="https://docs.rs/fuel-asm/latest/fuel_asm/enum.PanicReason.html";var L=e=>D.includes(e)?e:"unknown",S=e=>{if((e==null?void 0:e.type)==="failure"){let t=L(e.reason);return{doc:t!=="unknown"?`${R}#variant.${t}`:R,reason:t}}return{doc:R,reason:"unknown"}};var E=(e,t)=>typeof t=="bigint"?t.toString():t,I=(e,t)=>`${e===O.ZeroBytes32?"script":e}: ${t}`,d=class extends Error{constructor(t,r){let n=JSON.stringify(S(t.status),null,2),i=t.receipts.filter(o=>o.type===p.ReceiptType.Revert),y=i.length?`Reverts:
${i.map(({id:o,...c})=>I(o,`${c.val} ${JSON.stringify(c,E)}`)).join(`
`)}`:null,m=t.receipts.filter(o=>o.type===p.ReceiptType.Log||o.type===p.ReceiptType.LogData),T=m.length?`Logs:
${m.map(({type:o,id:c,...g})=>I(c,`${o===p.ReceiptType.LogData?g.data:g.val0}`)).join(`
`)}`:null,x=`Receipts:
${JSON.stringify(t.receipts.map(({type:o,...c})=>({type:p.ReceiptType[o],...c})),E,2)}`;super(`${r}

${n}

${y?`${y}

`:""}${T?`${T}

`:""}${x}`)}};function _(e){let t=[...e.receipts],r=t.pop();if(!r)throw new Error("Expected scriptResultReceipt");if(r.type!==a.ReceiptType.ScriptResult)throw new Error(`Invalid scriptResultReceipt type: ${r.type}`);let n=t.pop();if(!n)throw new Error("Expected returnReceipt");if(n.type!==a.ReceiptType.Return&&n.type!==a.ReceiptType.ReturnData&&n.type!==a.ReceiptType.Revert)throw new Error(`Invalid returnReceipt type: ${n.type}`);return{code:r.result,gasUsed:r.gasUsed,receipts:t,scriptResultReceipt:r,returnReceipt:n,callResult:e}}var u=class{constructor(t,r,n){this.bytes=(0,h.arrayify)(t),this.scriptDataEncoder=r,this.scriptResultDecoder=n}getScriptDataOffset(){return s.VM_TX_MEMORY+s.TRANSACTION_SCRIPT_FIXED_SIZE+new a.ByteArrayCoder(this.bytes.length).encodedLength}getArgOffset(){return this.getScriptDataOffset()+s.ASSET_ID_LEN+s.WORD_SIZE+s.CONTRACT_ID_LEN+s.WORD_SIZE+s.WORD_SIZE}encodeScriptData(t){return this.scriptDataEncoder(t)}decodeCallResult(t){try{let r=_(t);return this.scriptResultDecoder(r)}catch(r){throw new d(t,r.message)}}};var M=new u("0x24000000",()=>new Uint8Array(0),()=>{});0&&(module.exports={Script,returnZeroScript});
//# sourceMappingURL=index.js.map