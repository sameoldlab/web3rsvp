import{arrayify as N}from"@ethersproject/bytes";import{VM_TX_MEMORY as v,TRANSACTION_SCRIPT_FIXED_SIZE as C,ASSET_ID_LEN as w,WORD_SIZE as f,CONTRACT_ID_LEN as A}from"@fuel-ts/abi-coder";import{ReceiptType as u,ByteArrayCoder as $}from"@fuel-ts/transactions";import{ZeroBytes32 as x}from"@fuel-ts/constants";import{ReceiptType as c}from"@fuel-ts/transactions";var D=["Success","Revert","OutOfGas","TransactionValidity","MemoryOverflow","ArithmeticOverflow","ContractNotFound","MemoryOwnership","NotEnoughBalance","ExpectedInternalContext","AssetIdNotFound","InputNotFound","OutputNotFound","WitnessNotFound","TransactionMaturity","InvalidMetadataIdentifier","MalformedCallStructure","ReservedRegisterNotWritable","ErrorFlag","InvalidImmediateValue","ExpectedCoinInput","MaxMemoryAccess","MemoryWriteOverlap","ContractNotInInputs","InternalBalanceOverflow","ContractMaxSize","ExpectedUnallocatedStack","MaxStaticContractsReached","TransferAmountCannotBeZero","ExpectedOutputVariable","ExpectedParentInternalContext","IllegalJump","NonZeroMessageOutputRecipient","ZeroedMessageOutputRecipient"],p="https://docs.rs/fuel-asm/latest/fuel_asm/enum.PanicReason.html";var h=e=>D.includes(e)?e:"unknown",S=e=>{if((e==null?void 0:e.type)==="failure"){let t=h(e.reason);return{doc:t!=="unknown"?`${p}#variant.${t}`:p,reason:t}}return{doc:p,reason:"unknown"}};var E=(e,t)=>typeof t=="bigint"?t.toString():t,I=(e,t)=>`${e===x?"script":e}: ${t}`,l=class extends Error{constructor(t,r){let n=JSON.stringify(S(t.status),null,2),d=t.receipts.filter(s=>s.type===c.Revert),y=d.length?`Reverts:
${d.map(({id:s,...o})=>I(s,`${o.val} ${JSON.stringify(o,E)}`)).join(`
`)}`:null,m=t.receipts.filter(s=>s.type===c.Log||s.type===c.LogData),T=m.length?`Logs:
${m.map(({type:s,id:o,...g})=>I(o,`${s===c.LogData?g.data:g.val0}`)).join(`
`)}`:null,O=`Receipts:
${JSON.stringify(t.receipts.map(({type:s,...o})=>({type:c[s],...o})),E,2)}`;super(`${r}

${n}

${y?`${y}

`:""}${T?`${T}

`:""}${O}`)}};function L(e){let t=[...e.receipts],r=t.pop();if(!r)throw new Error("Expected scriptResultReceipt");if(r.type!==u.ScriptResult)throw new Error(`Invalid scriptResultReceipt type: ${r.type}`);let n=t.pop();if(!n)throw new Error("Expected returnReceipt");if(n.type!==u.Return&&n.type!==u.ReturnData&&n.type!==u.Revert)throw new Error(`Invalid returnReceipt type: ${n.type}`);return{code:r.result,gasUsed:r.gasUsed,receipts:t,scriptResultReceipt:r,returnReceipt:n,callResult:e}}var R=class{constructor(t,r,n){this.bytes=N(t),this.scriptDataEncoder=r,this.scriptResultDecoder=n}getScriptDataOffset(){return v+C+new $(this.bytes.length).encodedLength}getArgOffset(){return this.getScriptDataOffset()+w+f+A+f+f}encodeScriptData(t){return this.scriptDataEncoder(t)}decodeCallResult(t){try{let r=L(t);return this.scriptResultDecoder(r)}catch(r){throw new l(t,r.message)}}};var X=new R("0x24000000",()=>new Uint8Array(0),()=>{});export{R as Script,X as returnZeroScript};
//# sourceMappingURL=index.mjs.map